var mqtt = require('mqtt')
var client  = mqtt.connect('mqtt://iot.eclipse.org')
 
/*
var a = [

"1,23.7759272,90.3641766,0.5",
"1,23.7758931,90.3644384,0.5",
"1,23.7759223,90.3644918,0.0",
"1,23.7759223,90.3644918,0.0",
"1,23.7757399,90.3644141,4.5",
"1,23.7756154,90.3644218,4.25",
"1,23.7755163,90.364538,4.25",
"1,23.7753849,90.3646554,5.25",
"1,23.7752789,90.3648069,6.5",
"1,23.77519,90.3649411,5.0",
"1,23.77515,90.3650026,3.5",
"1,23.7751152,90.3650752,3.25",
"1,23.7750902,90.3651676,2.75",
"1,23.7750608,90.365215,2.0",
"1,23.7750377,90.3652514,1.75",
"1,23.7750213,90.3652726,0.5",
"1,23.7750044,90.3652952,1.25",
"1,23.7749789,90.3653521,2.25",
"1,23.7749422,90.3654134,2.25",
"1,23.7749071,90.3654708,2.0",
"1,23.77488,90.3655025,1.25",
"1,23.7748482,90.3655287,1.75",
"1,23.7747975,90.3655696,2.25",
"1,23.7747429,90.3656211,2.5",
"1,23.7745806,90.3658872,7.0",
"1,23.7744407,90.3660743,8.5",
"1,23.7742986,90.3662606,8.5",
"1,23.7741192,90.3664341,9.0",
"1,23.7739136,90.3666227,9.75",
"1,23.773694,90.366819,10.25",
"1,23.7735033,90.367,8.75",
"1,23.7732994,90.3671654,9.0",
"1,23.7730951,90.3672908,8.75",
"1,23.772927,90.3673696,6.75",
"1,23.7727193,90.3674651,8.75",
"1,23.77243,90.3675872,10.5",
"1,23.7721389,90.3677137,11.5",
"1,23.7718457,90.3678621,11.0",
"1,23.7715898,90.3679732,10.0",
"1,23.7714174,90.3680837,7.5",
"1,23.7712114,90.3681138,8.75",
"1,23.7709311,90.3681613,10.0",
"1,23.7706637,90.3682577,10.75",
"1,23.7703995,90.3683418,9.5",
"1,23.7701456,90.368456,11.25",
"1,23.7698426,90.3685728,11.75",
"1,23.7695493,90.3686848,11.25",
"1,23.7693505,90.3687518,6.0",
"1,23.7692795,90.3687868,3.25",
"1,23.7692142,90.3688057,2.75",
"1,23.7691232,90.3688375,3.75",
"1,23.7689506,90.3689014,5.0",
"1,23.7688285,90.3689376,4.75",
"1,23.7686709,90.3689861,6.0",
"1,23.7684958,90.3690427,7.0",
"1,23.7682692,90.3691555,8.75",
"1,23.767993,90.3691939,9.75",
"1,23.76771,90.3693433,11.5",
"1,23.7674093,90.3694693,12.0",
"1,23.7670915,90.3695965,11.75",
"1,23.766857,90.3696899,8.75",
"1,23.7666711,90.3697918,6.75",
"1,23.7664982,90.3698925,7.5",
"1,23.7662865,90.3699795,9.0",
"1,23.766053,90.3700481,9.5",
"1,23.7658172,90.370138,8.75",
"1,23.7656521,90.3702261,6.0",
"1,23.7655961,90.3702589,3.25",
"1,23.7655463,90.370268,2.5",
"1,23.7654973,90.3702813,4.0",
"1,23.7652846,90.3703495,7.0",
"1,23.7650686,90.3704365,8.75",
"1,23.7648606,90.3705292,8.25",
"1,23.7647716,90.3705771,3.75",
"1,23.764715,90.3706107,2.5",
"1,23.7646602,90.3706372,2.5",
"1,23.7646259,90.3706538,1.25",
"1,23.7645837,90.3706723,2.0",
"1,23.7645453,90.3706922,1.75",
"1,23.7645288,90.3707035,0.0",
"1,23.7645179,90.3707133,0.0",
"1,23.7645086,90.3707227,0.0",
"1,23.7645019,90.3707313,0.0",
"1,23.7644965,90.3707403,0.25",
"1,23.7644903,90.3707463,0.0",
"1,23.7644847,90.3707501,0.0",
"1,23.7644813,90.370753,0.0",
"1,23.7644793,90.3707561,0.0",
"1,23.7644779,90.3707585,0.0",
"1,23.764477,90.3707602,0.0",
"1,23.7644764,90.3707614,0.0",
"1,23.764476,90.3707623,0.0",
"1,23.7644757,90.3707629,0.0",
"1,23.7644754,90.3707633,0.0",
"1,23.7644753,90.3707636,0.0",
"1,23.7644753,90.3707638,0.0",
"1,23.7644753,90.3707639,0.0",
"1,23.7644752,90.3707641,0.0",
"1,23.7644439,90.370774,3.25",
"1,23.7642886,90.3708209,4.75",
"1,23.7641025,90.370903,6.75",
"1,23.7639109,90.3709784,7.5",
"1,23.7637251,90.3710432,7.5",
"1,23.7635046,90.3711238,8.75",
"1,23.7632763,90.3712478,9.0",
"1,23.7630322,90.371376,10.25",
"1,23.7627596,90.3715138,11.25",
"1,23.7624685,90.3716837,12.0",
"1,23.7621603,90.3718659,12.75",
"1,23.761858,90.3720544,12.75",
"1,23.7615295,90.3722465,13.5",
"1,23.7612125,90.3724433,13.75",
"1,23.7608789,90.3726478,14.0",
"1,23.7605848,90.3728106,11.5",
"1,23.760373,90.3729411,8.0",
"1,23.7602474,90.3730232,4.75",
"1,23.7601164,90.373094,5.0",
"1,23.7599367,90.3731835,7.75",
"1,23.7597138,90.373298,9.5",
"1,23.7594628,90.3734442,10.75",
"1,23.7592098,90.3735938,11.0",
"1,23.7589967,90.3737269,8.25",
"1,23.7588123,90.3738333,7.0",
"1,23.758679,90.3739141,5.75",
"1,23.7585261,90.3739863,6.25",
"1,23.7584657,90.3740196,3.75",
"1,23.7584271,90.3740699,3.0",
"1,23.7583884,90.3741041,1.75",
"1,23.7583671,90.3741212,0.0",
"1,23.7583557,90.3741361,0.0",
"1,23.7583505,90.3741455,0.0",
"1,23.7583478,90.3741525,0.0",
"1,23.7583467,90.3741579,0.0",
"1,23.7583457,90.3741621,0.0",
"1,23.7583451,90.3741647,0.0",
"1,23.7583444,90.3741663,0.0",
"1,23.7583438,90.3741672,0.0",
"1,23.7583435,90.3741677,0.0",
"1,23.7583434,90.3741679,0.0",
"1,23.7583434,90.374168,0.0",
"1,23.7583434,90.3741681,0.0",
"1,23.7583434,90.3741681,0.0",
"1,23.7583434,90.3741681,0.0",
"1,23.7583434,90.3741681,0.0",
"1,23.7583434,90.3741681,0.0",
"1,23.7583434,90.374168,0.0",
"1,23.7583433,90.374168,0.0",
"1,23.7583434,90.3741679,0.0",
"1,23.7583434,90.3741678,0.0",
"1,23.7583434,90.3741677,0.0",
"1,23.7583434,90.3741676,0.0",
"1,23.7583433,90.3741675,0.0",
"1,23.7583433,90.3741675,0.0",
"1,23.7583432,90.3741675,0.0",
"1,23.758343,90.3741675,0.0",
"1,23.7583429,90.3741676,0.0",
"1,23.7583428,90.3741676,0.0",
"1,23.7583426,90.3741677,0.0",
"1,23.7583425,90.3741677,0.0",
"1,23.7583424,90.3741678,0.0",
"1,23.7583423,90.3741678,0.0",
"1,23.7583422,90.3741679,0.0",
"1,23.7583421,90.3741679,0.0",
"1,23.758342,90.374168,0.0",
"1,23.7583419,90.374168,0.0",
"1,23.7583418,90.374168,0.0",
"1,23.7583417,90.3741681,0.0",
"1,23.7583417,90.3741681,0.0",
"1,23.7583417,90.3741681,0.0",
"1,23.7583417,90.3741681,0.0",
"1,23.7583417,90.3741682,0.0",
"1,23.7583418,90.3741683,0.0",
"1,23.7583418,90.3741683,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583418,90.3741685,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583418,90.3741684,0.0",
"1,23.7583417,90.3741684,0.0",
"1,23.7583417,90.3741684,0.0",
"1,23.7583416,90.3741683,0.0",
"1,23.7583415,90.3741683,0.0",
"1,23.7583414,90.3741682,0.0",
"1,23.7583413,90.3741682,0.0",
"1,23.7583413,90.3741682,0.0",
"1,23.7583412,90.3741682,0.0",
"1,23.7583412,90.3741682,0.0",
"1,23.7583412,90.3741682,0.0",
"1,23.7583411,90.3741682,0.0",
"1,23.7583411,90.3741683,0.0",
"1,23.7583411,90.3741683,0.0",
"1,23.758341,90.3741683,0.0",
"1,23.758341,90.3741683,0.0",
"1,23.758341,90.3741683,0.0",
"1,23.758341,90.3741683,0.0",
"1,23.7583409,90.3741684,0.0",
"1,23.7583409,90.3741684,0.0",
"1,23.7583408,90.3741684,0.0",
"1,23.7583405,90.3741687,0.25",
"1,23.7583406,90.3741714,0.0",
"1,23.7583314,90.3741816,1.25",
"1,23.7583056,90.3742014,1.25",
"1,23.758284,90.3742181,0.75",
"1,23.7582646,90.374233,0.5",
"1,23.7582478,90.3742457,0.25",
"1,23.7582247,90.3742615,1.25",
"1,23.7581579,90.3742944,3.25",
"1,23.7579815,90.3743618,5.75",
"1,23.7577832,90.3744596,8.25",
"1,23.7575306,90.3745923,10.75",
"1,23.75724,90.3747642,13.0",
"1,23.7569493,90.3749745,13.25",
"1,23.7566164,90.3751698,13.75",
"1,23.756278,90.3753884,14.5",
"1,23.7559358,90.375586,15.0",
"1,23.7555766,90.3757829,15.0",
"1,23.755283,90.3759739,13.0",
"1,23.754943,90.3761734,13.0",
"1,23.7546205,90.3763581,13.75",
"1,23.7542793,90.3765571,14.75",
"1,23.7539022,90.3767382,15.75",
"1,23.7535029,90.3769375,16.0",
"1,23.753153,90.3771139,14.75",
"1,23.7528583,90.3772876,12.25",
"1,23.7525616,90.3774532,12.5",
"1,23.7522448,90.3776009,12.25",
"1,23.7520092,90.3778002,9.75",
"1,23.7519453,90.3778756,2.75",
"1,23.7519139,90.3779186,1.0",
"1,23.7518941,90.3779384,1.25",
"1,23.7518507,90.3779818,3.0",
"1,23.7518134,90.3780156,1.75",
"1,23.7518061,90.378027,0.0",
"1,23.7518043,90.3780332,0.0",
"1,23.7518032,90.3780366,0.0",
"1,23.7518026,90.3780388,0.0",
"1,23.7518023,90.3780399,0.0",
"1,23.7518021,90.3780407,0.0",
"1,23.751802,90.3780412,0.0",
"1,23.751802,90.3780415,0.0",
"1,23.751802,90.3780417,0.0",
"1,23.751802,90.3780418,0.0",
"1,23.7518019,90.3780419,0.0",
"1,23.751802,90.3780419,0.0",
"1,23.751802,90.3780419,0.0",
"1,23.751802,90.3780419,0.0",
"1,23.751802,90.3780419,0.0",
"1,23.751802,90.3780419,0.0",
"1,23.751802,90.378042,0.0",
"1,23.751802,90.378042,0.0",
"1,23.751802,90.378042,0.0",
"1,23.7518021,90.378042,0.0",
"1,23.7518021,90.3780421,0.0",
"1,23.7518021,90.3780421,0.0",
"1,23.7518021,90.3780421,0.0",
"1,23.7518021,90.3780422,0.0",
"1,23.7518021,90.3780422,0.0",
"1,23.7518021,90.3780423,0.0",
"1,23.7518021,90.3780423,0.0",
"1,23.7518021,90.3780423,0.0",
"1,23.7518021,90.3780423,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780423,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780424,0.0",
"1,23.751802,90.3780423,0.0",
"1,23.7518019,90.3780424,0.0",
"1,23.7518019,90.3780423,0.0",
"1,23.7518019,90.3780423,0.0",
"1,23.7518019,90.3780423,0.0",
"1,23.7518019,90.3780423,0.0",
"1,23.7518019,90.3780423,0.0",
"1,23.7518018,90.3780424,0.0",
"1,23.7518018,90.3780424,0.0",
"1,23.7518018,90.3780424,0.0",
"1,23.7518018,90.3780424,0.0",
"1,23.7518017,90.3780425,0.0",
"1,23.7518017,90.3780425,0.0",
"1,23.7518017,90.3780425,0.0",
"1,23.7518012,90.3780428,0.25",
"1,23.7517956,90.3780458,0.5",
"1,23.7517819,90.3780542,1.0",
"1,23.7517546,90.3780735,1.5",
"1,23.7517277,90.3780948,1.0",
"1,23.7517092,90.3781112,0.75",
"1,23.7516975,90.3781247,0.25",
"1,23.7516785,90.3781432,1.25",
"1,23.7516514,90.3781646,1.25",
"1,23.7516209,90.378187,1.25",
"1,23.7515955,90.3782037,1.0",
"1,23.7515681,90.3782225,1.25",
"1,23.7515312,90.3782692,2.25",
"1,23.7515073,90.3783256,2.0",
"1,23.7514999,90.3783948,2.25",
"1,23.7515029,90.3784571,2.0",
"1,23.7515059,90.3784885,0.75",
"1,23.7515085,90.3785086,0.5",
"1,23.7515105,90.3785247,0.5",
"1,23.7515132,90.3785392,0.5",
"1,23.7515166,90.3785556,0.75",
"1,23.7515197,90.3785679,0.0",
"1,23.7515232,90.378579,0.25",
"1,23.7515274,90.3785916,0.5",
"1,23.7515325,90.3786072,0.5",
"1,23.7515523,90.3786562,2.5",
"1,23.7515959,90.3787358,3.0",
"1,23.7516493,90.3788218,3.0",
"1,23.7516976,90.3788907,2.5",
"1,23.7517356,90.3789484,2.25",
"1,23.751763,90.3789927,1.5",
"1,23.7517785,90.3790171,0.0",
"1,23.7517871,90.3790297,0.0",
"1,23.7517958,90.3790462,1.25",
"1,23.75182,90.3790972,2.75",
"1,23.7518485,90.3791656,2.5",
"1,23.7518729,90.3792286,2.25",
"1,23.7518941,90.3792872,2.0",
"1,23.7519082,90.3793378,2.0",
"1,23.7519266,90.3793878,2.0",
"1,23.7519524,90.3794413,2.0",
"1,23.7519764,90.37949,1.75",
"1,23.7519899,90.379523,1.0",
"1,23.7519999,90.37955,1.0",
"1,23.7520051,90.3795743,1.0",
"1,23.7520076,90.3795962,1.0",
"1,23.7520073,90.3796162,1.0",
"1,23.7520005,90.3796375,1.0",
"1,23.7520503,90.379776,4.25",
"1,23.7520974,90.3798355,2.75",
"1,23.7521097,90.3798725,1.5",
"1,23.7521208,90.3799094,1.5",
"1,23.7521247,90.3799374,1.25",
"1,23.7521171,90.3799537,0.75",
"1,23.7521073,90.3799616,0.75",
"1,23.7520978,90.3799669,0.5",
"1,23.7521224,90.3800379,3.75",
"1,23.7522396,90.380268,4.5",
"1,23.752309,90.3804094,4.25",
"1,23.7523312,90.3804679,3.25",
"1,23.7523568,90.3805172,2.5",
"1,23.752366,90.380534,1.25",
"1,23.7523642,90.3805363,0.0",
"1,23.7523591,90.3805354,0.0",
"1,23.7523544,90.380536,0.0",
"1,23.7523494,90.3805359,0.0",
"1,23.752345,90.3805361,0.0",
"1,23.7523423,90.3805359,0.0",
"1,23.7523403,90.3805357,0.0",
"1,23.7523387,90.3805352,0.0",
"1,23.7523372,90.3805345,0.0",
"1,23.7523358,90.3805337,0.0",
"1,23.7523347,90.3805331,0.0",
"1,23.7523336,90.3805328,0.0",
"1,23.7523328,90.3805325,0.0",
"1,23.7523322,90.3805324,0.0",
"1,23.7523317,90.3805322,0.0",
"1,23.7523311,90.3805321,0.0",
"1,23.7523309,90.3805322,0.0",
"1,23.7523209,90.3805302,0.0",
"1,23.7523131,90.3805299,0.25",
"1,23.7523023,90.3805302,0.5",
"1,23.7522943,90.38053,0.5",
"1,23.7522837,90.3805278,0.25",
"1,23.7522603,90.3805405,0.5",
"1,23.7522602,90.380551,0.5",
"1,23.7522597,90.3805648,0.5",
"1,23.7522549,90.3805796,0.0",
"1,23.7522677,90.3805957,0.0",
"1,23.7522733,90.3806027,0.0",
"1,23.7522806,90.380611,0.5",
"1,23.7522981,90.3806248,0.0",
"1,23.7523141,90.3806367,0.0",
"1,23.7523519,90.3806561,0.0",
"1,23.7523606,90.3806622,0.0",
"1,23.7523688,90.3806729,0.0"

]

*/
var a = [
"1,23.751815,90.377931",
"1,23.752261,90.377602",
"1,23.752772,90.377323",
"1,23.753371,90.377023",
"1,23.753970,90.376701",
"1,23.754608,90.376325",
"1,23.755343,90.375869",
"1,23.755932,90.375472",
"1,23.756678,90.375075",
"1,23.757228,90.374753",
"1,23.757817,90.374377",
"1,23.758652,90.373830",
"1,23.759310,90.373487",
"1,23.759948,90.373133",
"1,23.760655,90.372725",
"1,23.761166,90.372425",
"1,23.761804,90.372028",
"1,23.762374,90.371728",
"1,23.762757,90.371471",
"1,23.763327,90.371149",
"1,23.763965,90.370838",
"1,23.764603,90.370602",
"1,23.765133,90.370366",
"1,23.765722,90.370184",
"1,23.766272,90.369948",
"1,23.766841,90.369712",
"1,23.767499,90.369476",
"1,23.768157,90.369176",
"1,23.768864,90.368940",
"1,23.769610,90.368629",
"1,23.770219,90.368361",
"1,23.770739,90.368179",
"1,23.771505,90.367900",
"1,23.772271,90.367578",
"1,23.772948,90.367342",
"1,23.773675,90.366881",
"1,23.774264,90.366409",
"1,23.774657,90.365937",
"1,23.775001,90.365465",
"1,23.775374,90.365025",
"1,23.776628,90.363251"
]


var i = a.length - 1;
client.on('connect', function () {
  client.subscribe('ridoy')
  function ongo(){
  client.publish('ridoy', a[i])
  if(i==0){
    client.end();
  }
  i--;
  
}

setInterval(ongo,3000);
})
 
 client.on('message', function (topic, message) {
   // message is Buffer
  console.log(message.toString())
//   //client.end()
//  var b = message.toString();
//   var a = b.split(",");

//   console.log(parseFloat(a[0]));
//   console.log(parseFloat(a[1]));

  

  
// var d = Math.sqrt((23.773373-a[0])*(23.773373-a[0]))+((90.367101-a[1])*(90.367101-a[1]));
// console.log(d);

// if(d<=0.0010208464000004793) /*For 150 meter */
// //if(d<=0.0007103806890015494) /*For 100 meter */
// {
//   console.log("In Our Range");
// }
// else{

//   console.log("Not yet");
// }

 })